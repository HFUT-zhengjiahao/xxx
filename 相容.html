<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>相容关系可视化</title>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background-color: #f8f9fa;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
      }

      .main-container {
        display: flex;
        gap: 40px;
        flex-wrap: wrap;
        justify-content: center;
        max-width: 1000px;
      }

      /* 左侧图形区域 */
      .graph-container {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      svg {
        overflow: visible;
      }

      /* 节点和连线样式 */
      .link {
        stroke: #cbd5e0;
        stroke-width: 3px;
        transition: stroke 0.3s;
      }

      .node-circle {
        fill: #fff;
        stroke: #4a5568;
        stroke-width: 2px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .node-text {
        font-size: 16px;
        font-weight: bold;
        fill: #2d3748;
        pointer-events: none;
        text-anchor: middle;
        dominant-baseline: central;
      }

      /* 覆盖层区域（用于显示最大相容类） */

      .zone {
        fill: none;
        stroke: none;
        transition: all 0.4s ease;
        fill-opacity: 0;
      }

      /* 右侧控制/解释区域 */
      .controls {
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: 320px;
      }

      .control-card {
        background: white;
        padding: 15px 20px;
        border-radius: 8px;
        border-left: 5px solid #ccc;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        cursor: pointer;
        transition: transform 0.2s;
      }

      .control-card:hover {
        transform: translateX(5px);
        background-color: #fdfdfd;
      }

      .control-card h3 {
        margin: 0 0 5px 0;
        font-size: 16px;
        color: #2d3748;
      }

      .control-card p {
        margin: 0;
        font-size: 13px;
        color: #718096;
        line-height: 1.5;
      }

      .control-card.active {
        background-color: #ebf8ff;
      }

      /* 状态激活样式 */
      /* 1. 关系 */
      body[data-state="relation"] .link {
        stroke: #4299e1;
      }

      /* 2. 相容类 (举例 {1,2}) */
      body[data-state="class"] .node-1,
      body[data-state="class"] .node-2 {
        fill: #bee3f8;
        stroke: #3182ce;
      }
      body[data-state="class"] .link-1-2 {
        stroke: #3182ce;
        stroke-width: 5px;
      }

      /* 3. 最大相容类 */
      body[data-state="maximal"] .zone-left {
        fill: #4299e1;
        fill-opacity: 0.2;
      }
      body[data-state="maximal"] .zone-right {
        stroke: #e53e3e;
        stroke-width: 2px;
        stroke-dasharray: 5, 5;
        fill: none;
      }

      /* 4. 完全覆盖 */
      body[data-state="covering"] .zone-left {
        fill: #4299e1;
        fill-opacity: 0.2;
        stroke: #3182ce;
        stroke-width: 2px;
      }
      body[data-state="covering"] .zone-right {
        fill: #f56565;
        fill-opacity: 0.2;
        stroke: #e53e3e;
        stroke-width: 2px;
      }
      body[data-state="covering"] .node-3 {
        fill: #805ad5;
        color: white;
        stroke: #553c9a;
      } /* 节点3重叠色 */

      /* 高亮标签 */
      .tag {
        display: inline-block;
        padding: 2px 6px;
        font-size: 12px;
        border-radius: 4px;
        color: white;
        margin-bottom: 5px;
      }
      .bg-blue {
        background: #4299e1;
      }
      .bg-green {
        background: #48bb78;
      }
      .bg-orange {
        background: #ed8936;
      }
      .bg-purple {
        background: #9f7aea;
      }
    </style>
  </head>
  <body data-state="relation">
    <div class="main-container">
      <!-- 图形部分 -->
      <div class="graph-container">
        <svg width="400" height="300" viewBox="0 0 400 300">
          <!-- 区域定义 (背景) -->
          <!-- 左三角形: 1-2-3 -->
          <polygon points="100,80 100,220 200,150" class="zone zone-left" />
          <!-- 右三角形: 3-4-5 -->
          <polygon points="300,80 300,220 200,150" class="zone zone-right" />

          <!-- 连线 -->
          <line x1="100" y1="80" x2="100" y2="220" class="link link-1-2" />
          <line x1="100" y1="80" x2="200" y2="150" class="link link-1-3" />
          <line x1="100" y1="220" x2="200" y2="150" class="link link-2-3" />

          <line x1="200" y1="150" x2="300" y2="80" class="link link-3-4" />
          <line x1="200" y1="150" x2="300" y2="220" class="link link-3-5" />
          <line x1="300" y1="80" x2="300" y2="220" class="link link-4-5" />

          <!-- 节点 -->
          <circle cx="100" cy="80" r="20" class="node-circle node-1" />
          <text x="100" y="80" class="node-text">1</text>

          <circle cx="100" cy="220" r="20" class="node-circle node-2" />
          <text x="100" y="220" class="node-text">2</text>

          <circle cx="200" cy="150" r="20" class="node-circle node-3" />
          <text x="200" y="150" class="node-text">3</text>

          <circle cx="300" cy="80" r="20" class="node-circle node-4" />
          <text x="300" y="80" class="node-text">4</text>

          <circle cx="300" cy="220" r="20" class="node-circle node-5" />
          <text x="300" y="220" class="node-text">5</text>
        </svg>
        <div
          style="
            text-align: center;
            margin-top: 10px;
            font-size: 12px;
            color: #999;
          "
        >
          点击右侧卡片切换视图
        </div>
      </div>

      <!-- 解释控制部分 -->
      <div class="controls">
        <div
          class="control-card active"
          onclick="setState('relation', this)"
          style="border-left-color: #4299e1"
        >
          <span class="tag bg-blue">定义1</span>
          <h3>相容关系</h3>
          <p>图中的连线代表关系 R。<br />只要两点有连线，就是“相容”的。</p>
        </div>

        <div
          class="control-card"
          onclick="setState('class', this)"
          style="border-left-color: #48bb78"
        >
          <span class="tag bg-green">定义2</span>
          <h3>相容类 (普通)</h3>
          <p>
            <b>举例：{1, 2}</b
            ><br />它们之间有连线，所以是相容类。<br />但这不算“最大”，因为还可以把
            3 加进来。
          </p>
        </div>

        <div
          class="control-card"
          onclick="setState('maximal', this)"
          style="border-left-color: #ed8936"
        >
          <span class="tag bg-orange">定义3</span>
          <h3>最大相容类</h3>
          <p>
            <b>左侧：{1, 2, 3}</b
            ><br />这三个人两两互通，形成一个封闭的三角形。不能再加别人了（4和1不通）。
          </p>
        </div>

        <div
          class="control-card"
          onclick="setState('covering', this)"
          style="border-left-color: #9f7aea"
        >
          <span class="tag bg-purple">定义4</span>
          <h3>完全覆盖</h3>
          <p>
            <b>{ {1,2,3}, {3,4,5} }</b><br />两个最大块合起来。注意<b>节点 3</b>
            变成了紫色，因为它被两个集合同时“覆盖”。
          </p>
        </div>
      </div>
    </div>

    <script>
      function setState(state, element) {
        // 设置 Body 状态以触发 CSS 变化
        document.body.setAttribute("data-state", state);

        // 更新卡片激活状态
        const cards = document.querySelectorAll(".control-card");
        cards.forEach((card) => card.classList.remove("active"));
        element.classList.add("active");
      }
    </script>
  </body>
</html>
